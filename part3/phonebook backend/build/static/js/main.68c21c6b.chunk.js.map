{"version":3,"sources":["components/PersonForm.js","components/Persons.js","components/Filter.js","components/Message.js","services/persons.js","App.js","index.js"],"names":["PersonForm","addName","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","value","onChange","type","Persons","filteredPersons","deletePerson","numbersArr","map","person","i","key","name","phoneNumber","onClick","id","Filter","filter","handleFilterChange","Message","messageStatus","message","className","baseUrl","axios","get","then","res","data","newObject","post","put","delete","App","useState","persons","setPersons","setNewName","setNewNumber","setFilter","setMessage","setMessageStatus","useEffect","personService","updatePerson","number","find","n","console","log","changedNumber","returnedPerson","setTimeout","catch","err","toLowerCase","includes","event","target","preventDefault","nameObject","duplicate","window","confirm","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.68c21c6b.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst PersonForm = ({\r\n  addName,\r\n  newName,\r\n  handleNameChange,\r\n  newNumber,\r\n  handleNumberChange\r\n}) => {\r\n  return (\r\n    <form onSubmit={addName}>\r\n      <div>\r\n        name: <input value={newName} onChange={handleNameChange} />\r\n      </div>\r\n      <div>\r\n        phone: <input value={newNumber} onChange={handleNumberChange} />\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default PersonForm;\r\n","import React from \"react\";\r\n\r\nconst Persons = ({ filteredPersons, deletePerson }) => {\r\n  const numbersArr = filteredPersons.map((person, i) => {\r\n    return (\r\n      <p key={i}>\r\n        {person.name} {person.phoneNumber} \r\n        <button onClick={() => {deletePerson(person.id)}}>delete</button>\r\n      </p>\r\n    );\r\n  });\r\n  return <div>{numbersArr}</div>;\r\n};\r\n\r\nexport default Persons;\r\n","import React from \"react\";\r\n\r\nconst Filter = ({ filter, handleFilterChange }) => {\r\n  return (\r\n    <div>\r\n      filter shown with <input value={filter} onChange={handleFilterChange} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Filter;\r\n","import React from 'react'\r\n\r\nconst Message = ({messageStatus, message}) => {\r\n\r\n\r\n\r\n  if(messageStatus && message)\r\n  return (\r\n    <div className=\"success\">\r\n      {message}\r\n    </div>\r\n  )\r\n  else if(!messageStatus && message) \r\n  return (\r\n    <div className=\"error\">\r\n      {message}\r\n    </div>\r\n  )\r\n  return (null)\r\n}\r\n\r\nexport default Message","import axios from 'axios'\r\n// axios({timeout: (15 * 1000)})\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(res => res.data)\r\n}\r\n\r\nconst create = newObject => {\r\n  const request = axios.post(baseUrl, newObject)\r\n  return request.then(res => res.data)\r\n}\r\n\r\nconst deletePerson = id => {\r\n  const request = axios.delete(`${baseUrl}/${id}`)\r\n  return request.then(res => res.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  return request.then(res => res.data)\r\n}\r\n\r\n\r\n\r\nexport default {getAll, create, update, deletePerson}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport PersonForm from \"./components/PersonForm\";\r\nimport Persons from \"./components/Persons\";\r\nimport Filter from \"./components/Filter\";\r\nimport Message from \"./components/Message\";\r\nimport personService from \"./services/persons\";\r\n\r\nimport \"./index.css\";\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([]);\r\n  const [newName, setNewName] = useState(\"\");\r\n  const [newNumber, setNewNumber] = useState(\"\");\r\n  const [filter, setFilter] = useState(\"\");\r\n  const [message, setMessage] = useState(\"\");\r\n  const [messageStatus, setMessageStatus] = useState();\r\n\r\n  useEffect(() => {\r\n    personService.getAll().then(res => {\r\n      setPersons(res);\r\n    });\r\n  }, []);\r\n\r\n  const handleNameChange = event => {\r\n    setNewName(event.target.value);\r\n  };\r\n\r\n  const handleNumberChange = event => {\r\n    setNewNumber(event.target.value);\r\n  };\r\n\r\n  const handleFilterChange = event => {\r\n    setFilter(event.target.value);\r\n  };\r\n\r\n  const addName = event => {\r\n    event.preventDefault();\r\n    const nameObject = {\r\n      name: newName,\r\n      phoneNumber: newNumber\r\n    };\r\n\r\n    console.log(\"nameObject\", nameObject)\r\n\r\n    const duplicate = persons.find(person => person.name === nameObject.name);\r\n\r\n    console.log(\"duplicate?\", duplicate)\r\n\r\n    if (duplicate) {\r\n      const prompt = window.confirm(\r\n        `${duplicate.name} is already added to phonebook, replace the old number with a new one?`\r\n      );\r\n\r\n      if (prompt) {updatePerson(duplicate.id, nameObject.phoneNumber)}\r\n      \r\n    } else {\r\n      personService.create(nameObject)\r\n        .then(returnedPerson => {\r\n          console.log(\"returnedPerson\", returnedPerson)\r\n          setPersons(persons.concat(returnedPerson));\r\n          setNewName(\"\");\r\n          setNewNumber(\"\");\r\n          setMessageStatus(true);\r\n          setMessage(`Added ${returnedPerson.name}`);\r\n          personService.getAll().then(res => {\r\n            setPersons(res);\r\n          });\r\n          setTimeout(() => {\r\n            setMessageStatus(null);\r\n            setMessage(\"\");\r\n          }, 5000)\r\n        })\r\n        .catch(err => console.log(\"did not get a returnedPerson, err:\", err));\r\n    }\r\n  };\r\n\r\n  const deletePerson = id => {\r\n    const person = persons.find(n => n.id === id);\r\n    const prompt = window.confirm(\r\n      `Are you sure you want to delete ${person.name}`\r\n    );\r\n\r\n    if (prompt)\r\n      personService\r\n        .deletePerson(id)\r\n        .then(() => {\r\n          personService.getAll().then(res => {\r\n            setPersons(res);\r\n          });\r\n        });\r\n  };\r\n\r\n  const updatePerson = (id, number) => {\r\n    const person = persons.find(n => n.id === id);\r\n    console.log(\"person inside of updatePerson\", person)\r\n    const changedNumber = { ...person, phoneNumber: number };\r\n    console.log(\"changedNumber inside of updatePerson\", changedNumber)\r\n\r\n    personService.update(id, changedNumber).then(returnedPerson => {\r\n      setPersons(\r\n        persons.map(person => (person.id !== id ? person : returnedPerson))\r\n      );\r\n      setMessageStatus(true);\r\n      setMessage(`Updated ${returnedPerson.name}'s number`);\r\n      setNewName(\"\");\r\n      setNewNumber(\"\");\r\n      setTimeout(() => {\r\n        setMessageStatus(null);\r\n        setMessage(\"\");\r\n      }, 5000);\r\n    })\r\n    .catch(err => {\r\n      setMessageStatus(false);\r\n      setMessage(`Information of ${person.name} has already been removed from server`);\r\n      setNewName(\"\");\r\n      setNewNumber(\"\");\r\n      setTimeout(() => {\r\n        setMessageStatus(null);\r\n        setMessage(\"\");\r\n      }, 5000);\r\n    });\r\n  };\r\n\r\n  const filteredPersons = persons.filter(person => {\r\n    return person.name.toLowerCase().includes(filter.toLowerCase());\r\n  });\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Message messageStatus={messageStatus} message={message} />\r\n      <Filter filter={filter} handleFilterChange={handleFilterChange} />\r\n      <h2>add a new</h2>\r\n      <PersonForm\r\n        addName={addName}\r\n        newName={newName}\r\n        handleNameChange={handleNameChange}\r\n        newNumber={newNumber}\r\n        handleNumberChange={handleNumberChange}\r\n      />\r\n      <h2>Numbers</h2>\r\n      <Persons filteredPersons={filteredPersons} deletePerson={deletePerson} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}